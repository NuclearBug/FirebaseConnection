@page "/"
@using Google.Cloud.Firestore
@using System.Threading.Tasks
@using System.Collections.Generic

<h3>Cadastro de Usuário</h3>

<input @bind="user.Nome" placeholder="Nome">
<input @bind="user.UserId" placeholder="ID do Usuário">

<button @onclick="SaveUser">Salvar</button>

@code {
    FirestoreDb db;

    public class User
    {
        public string Nome { get; set; }
        public string UserId { get; set; }
        public string ImageUrl { get; set; }
    }

    private User user = new User();

    protected override async Task OnInitializedAsync()
    {
        db = FirestoreDb.Create("finunsize-126b5");
    }

    private async Task SaveUser()
    {
        if (!string.IsNullOrEmpty(user.Nome) && !string.IsNullOrEmpty(user.UserId))
        {
            CollectionReference collectionReference = db.Collection("usuarios");

            Dictionary<string, object> userDict = new Dictionary<string, object>
        {
                { "Nome", user.Nome },
                { "UserId", user.UserId },
               // { "ImageUrl", user.ImageUrl }
            };

            await collectionReference.AddAsync(userDict);
        }
    }
}
